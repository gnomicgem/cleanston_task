<turbo-frame id="discount_slider" data-controller="discount-slider">
  <%= form_with url: cart_path(cart), method: :patch, data: { turbo_frame: "cart-total", controller: "auto-submit" } do |f| %>
    <% discount_value = local_assigns[:input_discount] || local_assigns[:discount_max] %>
    <%= f.range_field :discount, min: 0, max: discount_max, value: discount_value, class: "w-full appearance-none cursor-pointer peer range-slider",
                      name: "discount",
                      data: {
                        controller: "discount-slider auto-submit",
                        action: "input->discount-slider#update",
                        discount_slider_target: "discountAmount"
                      } %>
  <% end %>
</turbo-frame>

<style>
    .range-slider {
        width: 100%;
        height: 4px;
        border-radius: 4px;
        background: #4AD9BD;
        outline: none;
        -webkit-appearance: none;
        appearance: none;
        cursor: pointer;
    }

    .range-slider::-webkit-slider-runnable-track {
        background: #4AD9BD;
        height: 4px;
        border-radius: 4px;
    }

    .range-slider::-moz-range-track {
        background: #4AD9BD;
        height: 4px;
        border-radius: 4px;
    }

    .range-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 38px;
        height: 38px;
        background: #4AD9BD;
        border-radius: 50%;
        cursor: pointer;
        margin-top: -18px;
    }

    .range-slider::-moz-range-thumb {
        width: 38px;
        height: 38px;
        background: #4AD9BD;
        border-radius: 50%;
        cursor: pointer;
    }
</style>
